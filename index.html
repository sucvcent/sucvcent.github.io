<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GitHub.io Earth Stable</title>
  <style>
    body { margin:0; background:#000; color:#fff; font-family:sans-serif; }
    h1 { text-align:center; padding:20px; }
    #earth-container { width:100%; height:500px; margin:0 auto; }
  </style>
</head>
<body>
<h1>3D Earth Demo</h1>
<div id="earth-container"></div>

<!-- 引入非模块版 Three.js -->
<script src="https://cdn.jsdelivr.net/npm/three@0.156.1/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.156.1/examples/js/controls/OrbitControls.js"></script>

<script>
window.onload = function() {
  const container = document.getElementById("earth-container");
  const scene = new THREE.Scene();

  const camera = new THREE.PerspectiveCamera(60, container.clientWidth/container.clientHeight, 0.1, 1000);
  camera.position.set(0,0,3);

  const renderer = new THREE.WebGLRenderer({ antialias:true });
  renderer.setSize(container.clientWidth, container.clientHeight);
  container.appendChild(renderer.domElement);

  const light = new THREE.DirectionalLight(0xffffff,1);
  light.position.set(5,3,5);
  scene.add(light);

  const loader = new THREE.TextureLoader();
  const earthDay = loader.load("https://threejs.org/examples/textures/land_ocean_ice_cloud_2048.jpg");
  const earthNight = loader.load("https://eoimages.gsfc.nasa.gov/images/imagerecords/57000/57730/earth_lights_lrg.jpg");

  const earthMaterial = new THREE.MeshPhongMaterial({
    map: earthDay,
    emissiveMap: earthNight,
    emissive: new THREE.Color(0xffffff),
    emissiveIntensity: 1.0
  });

  const earth = new THREE.Mesh(new THREE.SphereGeometry(1,64,64), earthMaterial);
  scene.add(earth);

  const atmosphere = new THREE.Mesh(
    new THREE.SphereGeometry(1.05,64,64),
    new THREE.MeshPhongMaterial({ color:0x00aaff, transparent:true, opacity:0.2, side:THREE.BackSide })
  );
  scene.add(atmosphere);

  const stars = new THREE.Mesh(
    new THREE.SphereGeometry(50,64,64),
    new THREE.MeshBasicMaterial({ map: loader.load("https://threejs.org/examples/textures/galaxy_starfield.png"), side:THREE.BackSide })
  );
  scene.add(stars);

  const controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;

  function animate() {
    requestAnimationFrame(animate);
    earth.rotation.y += 0.002;
    controls.update();
    renderer.render(scene, camera);
  }
  animate();

  window.addEventListener("resize", () => {
    camera.aspect = container.clientWidth/container.clientHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(container.clientWidth, container.clientHeight);
  });
}
</script>
</body>
</html>
